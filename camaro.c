#include"synthwave.h"

f32 CAMARO_VERTS[]={
  -90, 80, 200,
  -90, 8, 200,
  -90, 8, -200,
  -90, 76.692f, -171.317f,
  -90, 130, 22,
  -90, 40, 132,
  -90, 130, 100,
  -90, 30, 164,
  -90, 90, -42,
  -90, 90, 165,
  -90, 40, -200,
  -90, 19.468f, -191.697f,
  -90, 30, -132,
  -90, 0, -68,
  -90, 0, -140,
  -90, 83.45f, -116.82f,
  -90, 40, -100,
  -90, 30, -68,
  -90, 70, 100,
  -90, 29.462f, 100,
  -90, 0, 164,
  -90, 0, 100,
  90, 8, -200,
  90, 76.692f, -171.317f,
  90, 130, 22,
  90, 130, 100,
  90, 90, -42,
  90, 40, -200,
  90, 19.468f, -191.697f,
  90, 30, -132,
  90, 0, -68,
  90, 0, -140,
  90, 83.45f, -116.82f,
  90, 40, -100,
  90, 30, -68,
  0, 40, -200,
  90, 0, 100,
  90, 80, 200,
  90, 8, 200,
  90, 40, 132,
  0, 83.45f, -120.82f,
  90, 30, 164,
  90, 90, 165,
  90, 70, 100,
  90, 29.462f, 100,
  90, 0, 164,
  0, 80, 200,
  0, 76.692f, -175.316f,
  0, 130, 22,
  0, 8, 200,
  0, 130, 109.565f,
  0, 90, -70.266f,
  0, 90, 174.565f,
};


u32 CAMARO_INDEXES[] = {
  31,22,28,
  41,42,37,
  44,43,39,
  29,28,27,
  45,41,38,
  23,32,29,
  43,25,42,
  32,33,29,
  33,32,26,
  44,24,25,
  39,43,42,
  41,39,42,
  41,37,38,
  31,28,29,
  29,27,23,
  33,26,34,
  34,36,30,
  34,26,36,
  36,26,24,
  36,24,44,
  11,28,22,
  12,15,3,
  11,10,35,
  40,32,23,
  11,2,14,
  51,26,32,
  51,4,48,
  50,25,24,
  14,31,29,
  3,47,35,
  13,21,19,
  17,34,30,
  18,6,4,
  48,24,26,
  21,36,44,
  0,46,52,
  19,18,8,
  46,1,49,
  8,15,16,
  7,41,45,
  52,42,25,
  47,15,40,
  15,12,16,
  49,38,37,
  1,7,20,
  5,9,6,
  7,1,0,
  9,5,7,
  3,10,11,
  35,27,28,
  46,42,52,
  40,8,51,
  46,0,1,
  47,3,15,
  40,15,8,
  48,4,6,
  47,23,27,
  51,8,4,
  46,37,42,
  50,6,9,
  11,22,2,
  12,3,11,
  11,35,28,
  40,23,47,
  11,14,12,
  51,32,40,
  50,9,52,
  50,24,48,
  14,29,12,
  3,35,10,
  13,19,17,
  17,30,13,
  18,4,8,
  48,26,51,
  21,44,19,
  0,52,9,
  19,8,17,
  48,6,50,
  8,16,17,
  7,45,20,
  52,25,50,
  47,27,35,
  49,37,46,
  5,6,19,
  7,0,9
};

#define NB_VERTICES  53
#define NB_TRIANGLES 85

void MakeCameroMesh(Mesh* mesh)
{
  mesh->triangles = (Triangle*) $.Mem.PermaAllocator(NULL, sizeof(Triangle) * NB_TRIANGLES);
  mesh->nbTriangles = NB_TRIANGLES;

  for(u32 ii=0, jj=0;ii < (NB_TRIANGLES * 3);ii+=3,jj++)
  {
    Triangle* triangle = &mesh->triangles[jj];
    for(u32 kk=0;kk < 3;kk++)
    {
      u32 index = CAMARO_INDEXES[ii + kk];
      triangle->v[kk].x = CAMARO_VERTS[(index * 3) + 0] / 100.0f;
      triangle->v[kk].y = CAMARO_VERTS[(index * 3) + 1] / 100.0f;
      triangle->v[kk].z = CAMARO_VERTS[(index * 3) + 2] / 100.0f;
    }
    triangle->colour = 4;
  }

  $.Mesh.Finalise(mesh);
}
