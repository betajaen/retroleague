#include"synthwave.h"

f32 CAMARO_VERTS[]={
  -90,80,-200,
  -90,8,-200,
  -90,8,200,
  -90,76.692f,171.317f,
  -90,130,-22,
  -90,40,-132,
  -90,130,-100,
  -90,30,-164,
  -90,90,42,
  -90,90,-165,
  -90,40,200,
  -90,19.468f,191.697f,
  -90,30,132,
  -90,0,68,
  -90,0,140,
  -90,83.45f,116.82f,
  -90,40,100,
  -90,30,68,
  -90,70,-100,
  -90,29.462f,-100,
  -90,0,-164,
  -90,0,-100,
  90,8,200,
  90,76.692f,171.317f,
  90,130,-22,
  90,130,-100,
  90,90,42,
  90,40,200,
  90,19.468f,191.697f,
  90,30,132,
  90,0,68,
  90,0,140,
  90,83.45f,116.82f,
  90,40,100,
  90,30,68,
  0,40,200,
  90,0,-100,
  90,80,-200,
  90,8,-200,
  90,40,-132,
  0,83.45f,120.82f,
  90,30,-164,
  90,90,-165,
  90,70,-100,
  90,29.462f,-100,
  90,0,-164,
  0,80,-200,
  0,76.692f,175.316f,
  0,130,-22,
  0,8,-200,
  0,130,-109.565f,
  0,90,70.266f,
  0,90,-174.565f,
};


u32 CAMARO_INDEXES[] = {
28,22,31,
37,42,41,
39,43,44,
27,28,29,
38,41,45,
29,32,23,
42,25,43,
29,33,32,
26,32,33,
25,24,44,
42,43,39,
42,39,41,
38,37,41,
29,28,31,
23,27,29,
34,26,33,
30,36,34,
36,26,34,
24,26,36,
44,24,36,
22,28,11,
3,15,12,
35,10,11,
23,32,40,
14,2,11,
32,26,51,
48,4,51,
24,25,50,
29,31,14,
35,47,3,
19,21,13,
30,34,17,
4,6,18,
26,24,48,
44,36,21,
52,46,0,
8,18,19,
49,1,46,
16,15,8,
45,41,7,
25,42,52,
40,15,47,
16,12,15,
37,38,49,
20,7,1,
6,9,5,
0,1,7,
7,5,9,
11,10,3,
28,27,35,
52,42,46,
51,8,40,
1,0,46,
15,3,47,
8,15,40,
6,4,48,
27,23,47,
4,8,51,
42,37,46,
9,6,50,
2,22,11,
11,3,12,
28,35,11,
47,23,40,
12,14,11,
40,32,51,
52,9,50,
48,24,50,
12,29,14,
10,35,3,
17,19,13,
13,30,17,
8,4,18,
51,26,48,
19,44,21,
9,52,0,
17,8,19,
50,6,48,
17,16,8,
20,45,7,
50,25,52,
35,27,47,
46,37,49,
19,6,5,
9,0,7,

};

#define NB_VERTICES  53
#define NB_TRIANGLES 85

void Mesh_MakePlayer(Mesh* mesh)
{
  mesh->triangles = (Triangle*) $.Mem.PermaAllocator(NULL, sizeof(Triangle) * NB_TRIANGLES);
  mesh->nbTriangles = NB_TRIANGLES;

  for(u32 ii=0, jj=0;ii < (NB_TRIANGLES * 3);ii+=3,jj++)
  {
    Triangle* triangle = &mesh->triangles[jj];
    for(u32 kk=0;kk < 3;kk++)
    {
      u32 index = CAMARO_INDEXES[ii + kk];
      triangle->v[kk].x = CAMARO_VERTS[(index * 3) + 0] / 100.0f;
      triangle->v[kk].y = CAMARO_VERTS[(index * 3) + 1] / 100.0f;
      triangle->v[kk].z = CAMARO_VERTS[(index * 3) + 2] / 100.0f;
    }
    triangle->colour = 4;
  }

  $.Mesh.Finalise(mesh);
}
